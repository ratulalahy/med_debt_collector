<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Debt Collection Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Debt Collection Dashboard</h1>
    <button onclick="fetchData('call_logs')">Refresh Call Logs</button>
    <button onclick="fetchData('reminders')">Refresh Reminders</button>
    <button onclick="fetchData('payments')">Refresh Payments</button>

    <h2>Call Logs</h2>
    <table id="call_logs">
        <thead>
            <tr><th>Call ID</th><th>Phone</th><th>Type</th><th>Cost</th><th>Created At</th></tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Reminders</h2>
    <table id="reminders">
        <thead>
            <tr><th>Reminder ID</th><th>Patient Name</th><th>Type</th><th>Schedule Time</th><th>Created At</th></tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Payments</h2>
    <table id="payments">
        <thead>
            <tr><th>Payment ID</th><th>Patient ID</th><th>Amount</th><th>Method</th><th>Payment Date</th></tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        async function fetchData(endpoint) {
            try {
                const response = await fetch(`http://your-fastapi-domain.com/${endpoint}`);
                const data = await response.json();
                const tableBody = document.querySelector(`#${endpoint} tbody`);
                tableBody.innerHTML = '';
                data.forEach(item => {
                    const row = document.createElement('tr');
                    for (const key in item) {
                        const cell = document.createElement('td');
                        cell.textContent = item[key] || 'N/A';
                        row.appendChild(cell);
                    }
                    tableBody.appendChild(row);
                });
            } catch (error) {
                console.error(`Error fetching ${endpoint}:`, error);
            }
        }

        // Initial load
        fetchData('call_logs');
        fetchData('reminders');
        fetchData('payments');
    </script>
</body>
</html>